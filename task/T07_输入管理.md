# T07 - 输入管理 (InputManager)

## 阶段
**Phase 4: 交互层**

## 目标
处理用户输入，支持键盘和触摸操作。

## 任务清单

### 7.1 InputManager 类
- [x] 创建 `src/ui/InputManager.ts`
- [x] 绑定 Canvas 事件监听

### 7.2 键盘输入
- [x] 数字键 `1, 2, 3` 选择对应方块
- [x] `4` 键选择第四个方块（付费功能）
- [x] `P` 键暂停游戏
- [x] `R` 键重新开始
- [x] `Escape` 键返回菜单

### 7.3 鼠标输入
- [x] 点击方块预览区域选择
- [x] 悬停高亮效果
- [x] 点击按钮（开始、暂停等）

### 7.4 触摸输入（移动端）
- [x] 触摸选择方块
- [x] 大按钮设计，适合手指点击
- [x] 防止误触和多点触控问题

### 7.5 输入映射
```typescript
interface InputEvent {
  type: 'selectPiece' | 'pause' | 'restart' | 'menu';
  data?: any;
}

// 回调注册
inputManager.on('selectPiece', (index: number) => {
  gameEngine.selectPiece(index);
});
```

## 验收标准
- 键盘输入响应正常
- 鼠标点击准确识别目标
- 移动端触摸体验流畅

## 预计工时
2-3 小时

## 依赖
- T04（了解 UI 布局坐标）
- T06（调用 GameEngine 方法）
