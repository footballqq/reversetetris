# T08 - 关卡系统 (LevelSystem)

## 阶段
**Phase 5: 关卡系统**

## 目标
设计 1-100 关的关卡配置，支持随机无尽模式。

## 任务清单

### 8.1 关卡配置结构
- [ ] 创建 `src/levels/LevelConfig.ts`
```typescript
interface LevelConfig {
  id: number;
  name?: string;                    // 关卡名称（可选）
  targetLines: number;              // AI 需要消除的行数
  aiDifficulty: 'easy' | 'normal' | 'hard' | 'god';
  aiSpeed: number;                  // AI 操作时间（毫秒）
  initialGrid?: number[][];         // 初始盘面（可选）
  pieceChoices: 3 | 4;              // 可选方块数量
  timeLimit?: number;               // 时间限制（秒，可选）
}
```

### 8.2 关卡生成器
- [ ] 创建 `src/levels/LevelGenerator.ts`
- [ ] `generateLevel(id)`: 根据关卡 ID 生成配置
- [ ] 难度曲线算法

### 8.3 难度曲线设计
```
Level 1-10:   Easy AI, 目标 3-5 行
Level 11-30:  Normal AI, 目标 8-12 行
Level 31-50:  Normal AI, 目标 15-20 行, 初始垃圾行
Level 51-70:  Hard AI, 目标 20-30 行
Level 71-90:  Hard AI, 更多初始垃圾
Level 91-100: God AI, 极限挑战
```

### 8.4 特殊关卡
- [ ] Boss 关卡（每 10 关一个）
  - 特殊初始盘面
  - 额外挑战条件
- [ ] 教程关卡（Level 1-3）
  - 引导玩家理解机制

### 8.5 随机模式
- [ ] `generateRandomLevel(difficulty)`: 生成随机关卡
- [ ] 无尽模式：逐渐增加难度

### 8.6 关卡数据存储
- [ ] 关卡进度保存（localStorage）
- [ ] 最高分记录

## 验收标准
- 可以加载任意关卡配置
- 难度曲线合理，前期简单后期困难
- 随机模式可玩

## 预计工时
3-4 小时

## 依赖
- T06（GameEngine 接受 LevelConfig）
