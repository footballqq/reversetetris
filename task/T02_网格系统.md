# T02 - 网格系统 (GridSystem)

## 阶段
**Phase 2: 核心逻辑**

## 目标
实现俄罗斯方块的 10x20 游戏网格，包括基础数据结构和核心操作。

## 任务清单

### 2.1 Grid 类设计
- [x] 创建 `src/core/Grid.ts`
- [x] 定义网格数据结构（二维数组 `number[][]`）
- [x] 实现网格初始化（空白/预置垃圾行）

### 2.2 核心方法
- [x] `isCellEmpty(x, y)`: 检查指定位置是否为空
- [x] `isValidPosition(piece, x, y, rotation)`: 碰撞检测
- [x] `lockPiece(piece, x, y, rotation)`: 锁定方块到网格
- [x] `clearLines()`: 检测并消除满行，返回消除行数
- [x] `isGameOver()`: 检测是否触顶

### 2.3 辅助功能
- [x] `getHeight()`: 获取当前最高点高度
- [x] `countHoles()`: 统计空洞数量（AI 评分用）
- [x] `getBumpiness()`: 计算表面不平整度（AI 评分用）
- [x] `clone()`: 深拷贝网格（AI 模拟用）

### 2.4 常量定义
```typescript
const GRID_WIDTH = 10;
const GRID_HEIGHT = 20;
const HIDDEN_ROWS = 2; // 顶部隐藏行（用于生成方块）
```

## 验收标准
- 单元测试通过：碰撞检测、消行逻辑正确
- 可以手动在代码中模拟放置方块并消行

## 预计工时
2-3 小时

## 依赖
- T01（项目结构）
