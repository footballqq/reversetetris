# T04 - 渲染系统 (Renderer)

## 阶段
**Phase 2: 核心逻辑**

## 目标
使用 Canvas 绘制游戏画面，包括网格、方块、UI 元素。

## 任务清单

### 4.1 Renderer 类基础
- [ ] 创建 `src/render/Renderer.ts`
- [ ] 初始化 Canvas 上下文
- [ ] 实现自适应屏幕尺寸（保持宽高比）

### 4.2 绘制方法
- [ ] `clear()`: 清空画布
- [ ] `drawGrid(grid)`: 绘制网格背景和已锁定方块
- [ ] `drawPiece(piece, x, y, rotation)`: 绘制活动方块
- [ ] `drawGhostPiece(piece, x, y, rotation)`: 绘制幽灵块（落点预览）
- [ ] `drawUI(state)`: 绘制分数、关卡信息等

### 4.3 选块 UI
- [ ] `drawPieceSelector(pieces, selectedIndex)`: 绘制三选一界面
- [ ] 方块预览卡片样式
- [ ] 选中状态高亮

### 4.4 视觉效果
- [ ] 方块边框/高光效果
- [ ] 网格线样式
- [ ] 消行动画准备（闪烁效果）

### 4.5 常量配置
```typescript
const CELL_SIZE = 30;       // 单元格像素大小
const GRID_OFFSET_X = 50;   // 网格 X 偏移
const GRID_OFFSET_Y = 50;   // 网格 Y 偏移
const UI_PANEL_WIDTH = 200; // 右侧 UI 面板宽度
```

## 验收标准
- 可以正确绘制空白网格
- 可以在网格上绘制静态方块
- 三选一 UI 显示正常

## 预计工时
3-4 小时

## 依赖
- T01（Canvas 设置）
- T02（Grid 数据）
- T03（Piece 数据）
